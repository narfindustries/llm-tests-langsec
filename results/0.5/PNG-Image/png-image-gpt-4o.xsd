<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema"
        xmlns:dfdl="http://www.ogf.org/dfdl/dfdl-1.0/"
        targetNamespace="http://example.com/png"
        xmlns:tns="http://example.com/png"
        elementFormDefault="qualified"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.ogf.org/dfdl/dfdl-1.0/ http://www.ogf.org/dfdl/dfdl-1.0/dfdl.xsd">

    <dfdl:format ref="tns:dfdlGeneralFormat" lengthKind="explicit" byteOrder="bigEndian" encoding="utf-8"/>

    <dfdl:defineFormat name="dfdlGeneralFormat">
        <dfdl:format ref="dfdl:GeneralFormat" lengthKind="explicit" byteOrder="bigEndian" encoding="utf-8"/>
    </dfdl:defineFormat>

    <element name="PNG" type="tns:PNGType"/>

    <complexType name="PNGType">
        <sequence>
            <element name="Signature" type="tns:SignatureType"/>
            <element name="Chunks" type="tns:ChunksType" maxOccurs="unbounded"/>
        </sequence>
    </complexType>

    <simpleType name="SignatureType">
        <restriction base="hexBinary">
            <length value="8"/>
            <pattern value="89504E470D0A1A0A"/>
        </restriction>
    </simpleType>

    <complexType name="ChunksType">
        <sequence>
            <element name="Length" type="int"/>
            <element name="Type" type="string" dfdl:length="4" dfdl:lengthKind="explicit"/>
            <element name="Data" type="hexBinary" dfdl:length="{../Length}" dfdl:lengthKind="explicit"/>
            <element name="CRC" type="hexBinary" dfdl:length="4" dfdl:lengthKind="explicit"/>
        </sequence>
    </complexType>

</schema>
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:dfdl="http://www.ogf.org/dfdl/dfdl-1.0/">

    <!-- Example of a Tagged Image File Format (TIFF) DFDL Schema; adjusted from an error occurring in Apache Daffodil tool usage -->

    <xs:annotation>
        <xs:appinfo source="http://www.ogf.org/dfdl/">
            <dfdl:format ref="tns:GeneralFormat"/>
        </xs:appinfo>
    </xs:annotation>

    <xs:complexType name="TIFFHeader">
        <xs:sequence>
            <xs:element name="byteOrder" type="xs:string" dfdl:length="2"
                        dfdl:encoding="US-ASCII"
                        dfdl:representation="text">
                <xs:annotation>
                    <xs:appinfo source="http://www.ogf.org/dfdl/">
                        <dfdl:terminator value="42,42" initiator=""/>
                        <dfdl:discriminator test="{ . eq 'II' or . eq 'MM' }"/>
                    </xs:appinfo>
                </xs:annotation>
            </xs:element>
            <xs:element name="fortyTwo" type="xs:unsignedShort" dfdl:length="2"
                        dfdl:byteOrder="bigEndian">
                <xs:annotation>
                    <xs:appinfo source="http://www.ogf.org/dfdl/">
                        <dfdl:assert test="{ . eq 42 }"/>
                    </xs:appinfo>
                </xs:annotation>
            </xs:element>
            <xs:element name="ifdOffset" type="xs:unsignedInt" dfdl:length="4"
                        dfdl:byteOrder="{../tns:byteOrder}">
            </xs:element>
        </xs:sequence>
    </xs:complexType>

    <xs:element name="TIFFFile" type="tns:TIFFHeader">
        <xs:annotation>
            <xs:appinfo source="http://www.ogf.org/dfdl/">
                <dfdl:defineFormat name="GeneralFormat">
                    <dfdl:format byteOrder="bigEndian"
                                 encoding="US-ASCII"
                                 bitOrder="mostSignificantBitFirst"
                                 textTrimKind="none"
                                 textPadKind="none"
                                 textNumberRep="pattern"/>
                </dfdl:defineFormat>
            </xs:appinfo>
        </xs:annotation>
    </xs:element>
    
</xs:schema>
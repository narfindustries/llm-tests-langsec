<?xml version="1.0" encoding="UTF-8"?>
<dfdl:dfdlSchema xmlns:dfdl="http://www.ogf.org/dfdl/dfdl-1.0/" 
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                 xmlns:xs="http://www.w3.org/2001/XMLSchema" 
                 targetNamespace="http://example.com/tiff" 
                 xmlns="http://example.com/tiff" 
                 xsi:schemaLocation="http://www.ogf.org/dfdl/dfdl-1.0/ 
                                     http://www.ogf.org/dfdl/dfdl-1.0/dfdl.xsd">
  <xs:include schemaLocation="tiff-types.xsd"/>

  <dfdl:format ref="tns:BaseFormat"/>

  <xs:element name="TIFF" type="tns:TIFFType">
    <dfdl:annotation>
      <dfdl:format byteOrder="bigEndian" alignmentUnits="bytes" lengthKind="explicit" length="{4}"/>
    </dfdl:annotation>
  </xs:element>

  <xs:complexType name="TIFFType">
    <xs:sequence>
      <xs:element name="Header" type="tns:TIFFHeaderType"/>
      <xs:element name="IFD" type="tns:IFDType" minOccurs="1" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="TIFFHeaderType">
    <xs:sequence>
      <xs:element name="ByteOrder" type="xs:string">
        <dfdl:annotation>
          <dfdl:format lengthKind="explicit" length="2" textStringPadCharacter="%SP;" textStringJustification="left"/>
        </dfdl:annotation>
      </xs:element>
      <xs:element name="Version" type="xs:unsignedShort">
        <dfdl:annotation>
          <dfdl:format/>
        </dfdl:annotation>
      </xs:element>
      <xs:element name="FirstIFDOffset" type="xs:unsignedInt">
        <dfdl:annotation>
          <dfdl:format/>
        </dfdl:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="IFDType">
    <xs:sequence>
      <xs:element name="NumDirectoryEntries" type="xs:unsignedShort">
        <dfdl:annotation>
          <dfdl:format/>
        </dfdl:annotation>
      </xs:element>
      <xs:element name="DirectoryEntries" type="tns:DirectoryEntryType" minOccurs="1" maxOccurs="unbounded">
        <dfdl:annotation>
          <dfdl:format/>
        </dfdl:annotation>
      </xs:element>
      <xs:element name="NextIFDOffset" type="xs:unsignedInt">
        <dfdl:annotation>
          <dfdl:format/>
        </dfdl:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="DirectoryEntryType">
    <xs:sequence>
      <xs:element name="Tag" type="xs:unsignedShort">
        <dfdl:annotation>
          <dfdl:format/>
        </dfdl:annotation>
      </xs:element>
      <xs:element name="Type" type="xs:unsignedShort">
        <dfdl:annotation>
          <dfdl:format/>
        </dfdl:annotation>
      </xs:element>
      <xs:element name="Count" type="xs:unsignedInt">
        <dfdl:annotation>
          <dfdl:format/>
        </dfdl:annotation>
      </xs:element>
      <xs:element name="ValueOffset" type="xs:unsignedInt">
        <dfdl:annotation>
          <dfdl:format/>
        </dfdl:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>

  <dfdl:format ref="tns:BaseFormat" byteOrder="bigEndian">
    <dfdl:property name="textNumberRep">standard</dfdl:property>
    <dfdl:property name="binaryNumberRep">standard</dfdl:property>
  </dfdl:format>

</dfdl:dfdlSchema>
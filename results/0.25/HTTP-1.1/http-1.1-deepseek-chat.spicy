module HTTP_1_1;

import spicy;

type Version = enum {
    HTTP_1_0 = "HTTP/1.0",
    HTTP_1_1 = "HTTP/1.1"
};

type Method = enum {
    GET,
    POST,
    PUT,
    DELETE,
    HEAD,
    OPTIONS,
    CONNECT,
    TRACE,
    PATCH
};

type Request = unit {
    method: Method;
    uri: bytes &eod;
    version: Version;
};

type Response = unit {
    version: Version;
    code: uint16;
    reason: bytes &eod;
};

type HTTP_Message = unit {
    : Request | Response;
};

on HTTP_Message::%done {
    if ( self.is_request() ) {
        print self.as_request();
    } else {
        print self.as_response();
    }
}

export HTTP_Message;
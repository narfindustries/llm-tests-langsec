module GZIP;

import spicy;

public type GZIP = unit {
    magic1: uint8 &requires = 0x1f;
    magic2: uint8 &requires = 0x8b;
    compression_method: uint8 &requires = 0x08;
    flags: uint8;
    mtime: uint32;
    extra_flags: uint8;
    os: uint8;
    
    on %done {
        print self;
    }
};

# Flags bit field
type Flags = bitfield(8) {
    ftext: 0;
    fhcrc: 1;
    fextra: 2;
    fname: 3;
    fcomment: 4;
    reserved: 5..7;
};
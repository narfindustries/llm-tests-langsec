<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:dfdl="http://www.ogf.org/dfdl/dfdl-1.0/"
           xmlns:ex="http://example.com/dfdl"
           targetNamespace="http://example.com/dfdl"
           elementFormDefault="qualified">

  <xs:import namespace="http://www.ogf.org/dfdl/dfdl-1.0/"
             schemaLocation="http://www.ogf.org/dfdl/dfdl-1.0/dfdl.xsd"/>

  <xs:annotation>
    <xs:appinfo source="http://www.ogf.org/dfdl/">
      <dfdl:format ref="ex:GeneralFormat"/>
    </xs:appinfo>
  </xs:annotation>

  <xs:complexType name="HL7v2MessageType">
    <xs:sequence>
      <xs:element name="MSH" type="ex:MSHSegmentType"/>
      <xs:element name="EVN" type="ex:EVNSegmentType" minOccurs="0"/>
      <xs:element name="PID" type="ex:PIDSegmentType"/>
      <xs:element name="PV1" type="ex:PV1SegmentType"/>
      <xs:element name="OBX" type="ex:OBXSegmentType" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="MSHSegmentType">
    <xs:sequence>
      <xs:element name="FieldSeparator" type="xs:string" dfdl:length="1" dfdl:initiator="MSH"/>
      <xs:element name="EncodingCharacters" type="xs:string" dfdl:length="4"/>
      <xs:element name="SendingApplication" type="xs:string" dfdl:length="180"/>
      <xs:element name="SendingFacility" type="xs:string" dfdl:length="180"/>
      <xs:element name="ReceivingApplication" type="xs:string" dfdl:length="180"/>
      <xs:element name="ReceivingFacility" type="xs:string" dfdl:length="180"/>
      <xs:element name="DateTimeOfMessage" type="xs:dateTime" dfdl:length="26"/>
      <xs:element name="Security" type="xs:string" dfdl:length="40" minOccurs="0"/>
      <xs:element name="MessageType" type="xs:string" dfdl:length="15"/>
      <xs:element name="MessageControlID" type="xs:string" dfdl:length="20"/>
      <xs:element name="ProcessingID" type="xs:string" dfdl:length="3"/>
      <xs:element name="VersionID" type="xs:string" dfdl:length="60"/>
      <xs:element name="SequenceNumber" type="xs:string" dfdl:length="15" minOccurs="0"/>
      <xs:element name="ContinuationPointer" type="xs:string" dfdl:length="180" minOccurs="0"/>
      <xs:element name="AcceptAcknowledgmentType" type="xs:string" dfdl:length="2" minOccurs="0"/>
      <xs:element name="ApplicationAcknowledgmentType" type="xs:string" dfdl:length="2" minOccurs="0"/>
      <xs:element name="CountryCode" type="xs:string" dfdl:length="3" minOccurs="0"/>
      <xs:element name="CharacterSet" type="xs:string" dfdl:length="16" minOccurs="0"/>
      <xs:element name="PrincipalLanguageOfMessage" type="xs:string" dfdl:length="250" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="EVNSegmentType">
    <xs:sequence>
      <xs:element name="EventTypeCode" type="xs:string" dfdl:length="3"/>
      <xs:element name="RecordedDateTime" type="xs:dateTime" dfdl:length="26"/>
      <xs:element name="DateTimePlannedEvent" type="xs:dateTime" dfdl:length="26" minOccurs="0"/>
      <xs:element name="EventReasonCode" type="xs:string" dfdl:length="3" minOccurs="0"/>
      <xs:element name="OperatorID" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="EventOccurred" type="xs:dateTime" dfdl:length="26" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="PIDSegmentType">
    <xs:sequence>
      <xs:element name="SetID" type="xs:string" dfdl:length="4"/>
      <xs:element name="PatientID" type="xs:string" dfdl:length="20"/>
      <xs:element name="PatientIdentifierList" type="xs:string" dfdl:length="250"/>
      <xs:element name="AlternatePatientID" type="xs:string" dfdl:length="20" minOccurs="0"/>
      <xs:element name="PatientName" type="xs:string" dfdl:length="250"/>
      <xs:element name="MotherMaidenName" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="DateOfBirth" type="xs:date" dfdl:length="8"/>
      <xs:element name="Sex" type="xs:string" dfdl:length="1"/>
      <xs:element name="PatientAlias" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="Race" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="PatientAddress" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="CountyCode" type="xs:string" dfdl:length="4" minOccurs="0"/>
      <xs:element name="PhoneNumberHome" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="PhoneNumberBusiness" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="PrimaryLanguage" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="MaritalStatus" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="Religion" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="PatientAccountNumber" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="SSNNumber" type="xs:string" dfdl:length="11" minOccurs="0"/>
      <xs:element name="DriverLicenseNumber" type="xs:string" dfdl:length="25" minOccurs="0"/>
      <xs:element name="MotherIdentifier" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="EthnicGroup" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="BirthPlace" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="MultipleBirthIndicator" type="xs:string" dfdl:length="1" minOccurs="0"/>
      <xs:element name="BirthOrder" type="xs:string" dfdl:length="2" minOccurs="0"/>
      <xs:element name="Citizenship" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="VeteransMilitaryStatus" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="Nationality" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="PatientDeathDateAndTime" type="xs:dateTime" dfdl:length="26" minOccurs="0"/>
      <xs:element name="PatientDeathIndicator" type="xs:string" dfdl:length="1" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="PV1SegmentType">
    <xs:sequence>
      <xs:element name="SetID" type="xs:string" dfdl:length="4"/>
      <xs:element name="PatientClass" type="xs:string" dfdl:length="1"/>
      <xs:element name="AssignedPatientLocation" type="xs:string" dfdl:length="80"/>
      <xs:element name="AdmissionType" type="xs:string" dfdl:length="2"/>
      <xs:element name="PreadmitNumber" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="PriorPatientLocation" type="xs:string" dfdl:length="80" minOccurs="0"/>
      <xs:element name="AttendingDoctor" type="xs:string" dfdl:length="250"/>
      <xs:element name="ReferringDoctor" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="ConsultingDoctor" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="HospitalService" type="xs:string" dfdl:length="3"/>
      <xs:element name="TemporaryLocation" type="xs:string" dfdl:length="80" minOccurs="0"/>
      <xs:element name="PreadmitTestIndicator" type="xs:string" dfdl:length="2" minOccurs="0"/>
      <xs:element name="ReAdmissionIndicator" type="xs:string" dfdl:length="2" minOccurs="0"/>
      <xs:element name="AdmitSource" type="xs:string" dfdl:length="6"/>
      <xs:element name="AmbulatoryStatus" type="xs:string" dfdl:length="2" minOccurs="0"/>
      <xs:element name="VIPIndicator" type="xs:string" dfdl:length="2" minOccurs="0"/>
      <xs:element name="AdmittingDoctor" type="xs:string" dfdl:length="250"/>
      <xs:element name="PatientType" type="xs:string" dfdl:length="2"/>
      <xs:element name="VisitNumber" type="xs:string" dfdl:length="250"/>
      <xs:element name="FinancialClass" type="xs:string" dfdl:length="50"/>
      <xs:element name="ChargePriceIndicator" type="xs:string" dfdl:length="2" minOccurs="0"/>
      <xs:element name="CourtesyCode" type="xs:string" dfdl:length="2" minOccurs="0"/>
      <xs:element name="CreditRating" type="xs:string" dfdl:length="2" minOccurs="0"/>
      <xs:element name="ContractCode" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="ContractEffectiveDate" type="xs:date" dfdl:length="8" minOccurs="0"/>
      <xs:element name="ContractAmount" type="xs:decimal" dfdl:length="12" minOccurs="0"/>
      <xs:element name="ContractPeriod" type="xs:string" dfdl:length="3" minOccurs="0"/>
      <xs:element name="InterestCode" type="xs:string" dfdl:length="2" minOccurs="0"/>
      <xs:element name="TransferToBadDebtCode" type="xs:string" dfdl:length="1" minOccurs="0"/>
      <xs:element name="TransferToBadDebtDate" type="xs:date" dfdl:length="8" minOccurs="0"/>
      <xs:element name="BadDebtAgencyCode" type="xs:string" dfdl:length="10" minOccurs="0"/>
      <xs:element name="BadDebtTransferAmount" type="xs:decimal" dfdl:length="12" minOccurs="0"/>
      <xs:element name="BadDebtRecoveryAmount" type="xs:decimal" dfdl:length="12" minOccurs="0"/>
      <xs:element name="DeleteAccountIndicator" type="xs:string" dfdl:length="1" minOccurs="0"/>
      <xs:element name="DeleteAccountDate" type="xs:date" dfdl:length="8" minOccurs="0"/>
      <xs:element name="DischargeDisposition" type="xs:string" dfdl:length="3"/>
      <xs:element name="DischargedToLocation" type="xs:string" dfdl:length="80"/>
      <xs:element name="DietType" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="ServicingFacility" type="xs:string" dfdl:length="2"/>
      <xs:element name="BedStatus" type="xs:string" dfdl:length="1"/>
      <xs:element name="AccountStatus" type="xs:string" dfdl:length="2"/>
      <xs:element name="PendingLocation" type="xs:string" dfdl:length="80" minOccurs="0"/>
      <xs:element name="PriorTemporaryLocation" type="xs:string" dfdl:length="80" minOccurs="0"/>
      <xs:element name="AdmitDateTime" type="xs:dateTime" dfdl:length="26"/>
      <xs:element name="DischargeDateTime" type="xs:dateTime" dfdl:length="26" minOccurs="0"/>
      <xs:element name="CurrentPatientBalance" type="xs:decimal" dfdl:length="12" minOccurs="0"/>
      <xs:element name="TotalCharges" type="xs:decimal" dfdl:length="12" minOccurs="0"/>
      <xs:element name="TotalAdjustments" type="xs:decimal" dfdl:length="12" minOccurs="0"/>
      <xs:element name="TotalPayments" type="xs:decimal" dfdl:length="12" minOccurs="0"/>
      <xs:element name="AlternateVisitID" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="VisitIndicator" type="xs:string" dfdl:length="1" minOccurs="0"/>
      <xs:element name="OtherHealthcareProvider" type="xs:string" dfdl:length="250" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="OBXSegmentType">
    <xs:sequence>
      <xs:element name="SetID" type="xs:string" dfdl:length="4"/>
      <xs:element name="ValueType" type="xs:string" dfdl:length="2"/>
      <xs:element name="ObservationIdentifier" type="xs:string" dfdl:length="250"/>
      <xs:element name="ObservationSubID" type="xs:string" dfdl:length="20" minOccurs="0"/>
      <xs:element name="ObservationValue" type="xs:string" dfdl:length="65536"/>
      <xs:element name="Units" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="ReferencesRange" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="AbnormalFlags" type="xs:string" dfdl:length="5" minOccurs="0"/>
      <xs:element name="Probability" type="xs:decimal" dfdl:length="5" minOccurs="0"/>
      <xs:element name="NatureOfAbnormalTest" type="xs:string" dfdl:length="2" minOccurs="0"/>
      <xs:element name="ObservationResultStatus" type="xs:string" dfdl:length="2"/>
      <xs:element name="DateLastObsNormalValues" type="xs:date" dfdl:length="8" minOccurs="0"/>
      <xs:element name="UserDefinedAccessChecks" type="xs:string" dfdl:length="20" minOccurs="0"/>
      <xs:element name="DateTimeOfTheObservation" type="xs:dateTime" dfdl:length="26"/>
      <xs:element name="ProducersID" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="ResponsibleObserver" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="ObservationMethod" type="xs:string" dfdl:length="250" minOccurs="0"/>
      <xs:element name="EquipmentInstanceIdentifier" type="xs:string" dfdl:length="22" minOccurs="0"/>
      <xs:element name="DateTimeOfTheAnalysis" type="xs:dateTime" dfdl:length="26" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>

  <xs:element name="HL7v2Message" type="ex:HL7v2MessageType"/>

  <dfdl:defineFormat name="GeneralFormat">
    <dfdl:format representation="text" encoding="UTF-8" lengthKind="delimited" separator="&#x0D;" separatorPosition="infix"/>
  </dfdl:defineFormat>

</xs:schema>